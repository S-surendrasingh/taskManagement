<form action="<%= form_action %>" method="post">
  <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
  <% if method_override %>
    <input type="hidden" name="_method" value="<%= method_override %>">
  <% end %>

  <div>
    <label>Title</label><br>
    <input type="text" name="task[title]" value="<%= task.title %>" required>
  </div>
  <div>
    <label>Description</label><br>
    <textarea name="task[description]"><%= task.description %></textarea>
  </div>
  <div>
    <label>Status</label><br>
    <select name="task[status]">
      <option value="pending" <%= 'selected' if task.status == 'pending' %>>pending</option>
      <option value="completed" <%= 'selected' if task.status == 'completed' %>>completed</option>
    </select>
  </div>
  <div>
    <label>Due date</label><br>
    <input type="datetime-local" name="task[due_date]" value="<%= task.due_date&.strftime('%Y-%m-%dT%H:%M') %>">
  </div>
  <div>
    <label>User</label><br>
    <select name="task[user_id]">
      <% @users.each do |u| %>
        <option value="<%= u.id %>" <%= 'selected' if task.user_id == u.id %>><%= u.name %> (<%= u.email %>)</option>
      <% end %>
    </select>
  </div>
  <div style="margin-top:10px">
    <button type="submit">Save</button>
  </div>
</form>
